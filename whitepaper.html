<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIGIL Protocol Whitepaper | v0.4</title>

  <meta name="description" content="SIGIL Protocol Whitepaper — A protocol and registry design for autonomous AI agent identity, persistence, and verifiable agency on Solana.">
  <meta name="keywords" content="AI agents, Solana, blockchain, identity, whitepaper, SIGIL, proof of agency, autonomous agents">
  <meta name="author" content="SIGIL Protocol">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#050505">

  <meta property="og:type" content="article">
  <meta property="og:url" content="https://sigil.xyz/whitepaper.html">
  <meta property="og:title" content="SIGIL Protocol Whitepaper">
  <meta property="og:description" content="A protocol and registry design for autonomous AI agent identity, persistence, and verifiable agency on Solana.">
  <meta property="og:site_name" content="SIGIL Protocol">

  <link rel="canonical" href="https://sigil.xyz/whitepaper.html">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* ===== DESIGN TOKENS (same as main site) ===== */
    :root {
      --bg: #050505;
      --bg-elevated: #0a0a0a;
      --surface: #0f0f0f;
      --surface-hover: #141414;
      --border: rgba(255, 255, 255, 0.08);
      --border-hover: rgba(255, 255, 255, 0.15);
      --text: #e8eaed;
      --text-muted: #9ca3af;
      --text-dim: #808896;
      --accent: #4ade80;
      --accent-hover: #22c55e;
      --accent-dim: rgba(74, 222, 128, 0.15);
      --ember: #d4a574;
      --ember-hover: #e0b68a;
      --ember-dim: rgba(212, 165, 116, 0.15);
      --ember-glow: rgba(212, 165, 116, 0.3);
      --danger: #ef4444;
      --warning: #f59e0b;

      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      --space-12: 48px;
      --space-16: 64px;
      --space-20: 80px;
      --space-24: 96px;

      --font-sans: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
      --text-xs: 0.75rem;
      --text-sm: 0.8125rem;
      --text-base: 0.875rem;
      --text-md: 0.9375rem;
      --text-lg: 1rem;
      --text-xl: 1.125rem;
      --text-2xl: 1.25rem;
      --text-3xl: 1.5rem;
      --text-4xl: 2rem;
      --text-5xl: 2.5rem;
      --text-6xl: 3rem;

      --leading-tight: 1.25;
      --leading-normal: 1.5;
      --leading-relaxed: 1.625;
      --leading-loose: 1.8;

      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-xl: 16px;
      --radius-full: 9999px;

      --shadow-1: 0 1px 2px rgba(0, 0, 0, 0.3);
      --shadow-2: 0 2px 4px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3);
      --shadow-3: 0 4px 8px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
      --shadow-ember-glow: 0 0 20px rgba(212, 165, 116, 0.15);

      --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
      --duration-fast: 150ms;
      --duration-normal: 250ms;
      --duration-slow: 400ms;

      --z-sticky: 50;
      --z-toc: 40;
    }

    /* ===== RESET ===== */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      scroll-padding-top: 100px;
    }

    body {
      font-family: var(--font-sans);
      background: var(--bg);
      color: var(--text);
      line-height: 1.65;
      font-weight: 400;
      min-height: 100vh;
      overflow-x: hidden;
    }

    ::selection {
      background: var(--accent-dim);
      color: var(--text);
    }

    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg);
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.15);
      border-radius: var(--radius-full);
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.25);
    }

    @keyframes sigilBurn {
      0% { text-shadow: 0 0 10px rgba(212, 165, 116, 0.3); }
      33% { text-shadow: 0 0 20px rgba(212, 165, 116, 0.5), 0 0 40px rgba(74, 222, 128, 0.1); }
      66% { text-shadow: 0 0 15px rgba(212, 165, 116, 0.4), 0 0 30px rgba(212, 165, 116, 0.2); }
      100% { text-shadow: 0 0 10px rgba(212, 165, 116, 0.3); }
    }

    /* ===== HEADER ===== */
    header {
      border-bottom: 1px solid var(--border);
      padding: var(--space-4) var(--space-8);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      background: rgba(5, 5, 5, 0.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      z-index: var(--z-sticky);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      text-decoration: none;
    }

    .logo-sigil {
      font-size: var(--text-2xl);
      color: var(--ember);
      animation: sigilBurn 4s infinite;
      line-height: 1;
    }

    .logo-text {
      font-family: var(--font-mono);
      font-size: var(--text-base);
      font-weight: 700;
      letter-spacing: 0.08em;
      color: var(--ember);
    }

    .logo-text span {
      color: var(--text-dim);
      font-weight: 400;
    }

    .back-link {
      color: var(--text-muted);
      text-decoration: none;
      font-family: var(--font-sans);
      font-size: var(--text-sm);
      font-weight: 500;
      letter-spacing: 0.01em;
      transition: color var(--duration-normal) var(--ease-out);
      display: flex;
      align-items: center;
      gap: var(--space-2);
    }

    .back-link:hover {
      color: var(--ember);
    }

    /* ===== LAYOUT ===== */
    .page-wrapper {
      display: grid;
      grid-template-columns: 240px 1fr;
      max-width: 1200px;
      margin: 0 auto;
      gap: var(--space-10);
      padding: var(--space-10) var(--space-6);
      position: relative;
    }

    /* ===== TABLE OF CONTENTS ===== */
    .toc {
      position: sticky;
      top: 90px;
      max-height: calc(100vh - 120px);
      overflow-y: auto;
      padding-right: var(--space-4);
      padding-bottom: var(--space-10);
    }

    .toc::-webkit-scrollbar {
      width: 3px;
    }

    .toc::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-full);
    }

    .toc-title {
      font-family: var(--font-mono);
      font-size: var(--text-xs);
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: var(--text-dim);
      margin-bottom: var(--space-4);
      padding-bottom: var(--space-2);
      border-bottom: 1px solid var(--border);
    }

    .toc-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .toc-list li {
      margin-bottom: 0;
    }

    .toc-list a {
      display: block;
      color: var(--text-dim);
      text-decoration: none;
      font-family: var(--font-sans);
      font-size: 11.5px;
      font-weight: 400;
      line-height: 1.4;
      padding: 5px 0 5px var(--space-3);
      border-left: 2px solid transparent;
      transition: all var(--duration-fast) var(--ease-out);
    }

    .toc-list a:hover {
      color: var(--text-muted);
      border-left-color: rgba(255, 255, 255, 0.1);
    }

    .toc-list a.active {
      color: var(--ember);
      border-left-color: var(--ember);
      font-weight: 500;
    }

    .toc-list .toc-sub {
      padding-left: calc(var(--space-3) + 10px);
      font-size: 10.5px;
    }

    /* ===== MOBILE TOC ===== */
    .toc-mobile-toggle {
      display: none;
      width: 100%;
      padding: var(--space-3) var(--space-4);
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      color: var(--text-muted);
      font-family: var(--font-mono);
      font-size: var(--text-xs);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      margin-bottom: var(--space-6);
      text-align: left;
      transition: all var(--duration-fast) var(--ease-out);
    }

    .toc-mobile-toggle:hover {
      border-color: var(--border-hover);
      color: var(--text);
    }

    .toc-mobile-toggle::after {
      content: '▾';
      float: right;
      transition: transform var(--duration-fast) var(--ease-out);
    }

    .toc-mobile-toggle.open::after {
      transform: rotate(180deg);
    }

    .toc-mobile-content {
      display: none;
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: var(--space-4);
      margin-bottom: var(--space-8);
      max-height: 60vh;
      overflow-y: auto;
    }

    .toc-mobile-content.open {
      display: block;
    }

    .toc-mobile-content .toc-list a {
      padding: 6px var(--space-3);
    }

    /* ===== ARTICLE ===== */
    .article {
      max-width: 800px;
      min-width: 0;
    }

    /* Title section */
    .article-header {
      margin-bottom: var(--space-12);
      padding-bottom: var(--space-8);
      border-bottom: 1px solid var(--border);
    }

    .article-sigil {
      font-size: 48px;
      color: var(--ember);
      display: block;
      margin-bottom: var(--space-4);
      animation: sigilBurn 4s infinite;
      text-shadow: 0 0 30px rgba(212, 165, 116, 0.4), 0 0 60px rgba(212, 165, 116, 0.15);
      line-height: 1;
    }

    .article-header h1 {
      font-family: var(--font-sans);
      font-size: clamp(1.75rem, 4vw, 2.5rem);
      font-weight: 700;
      letter-spacing: -0.03em;
      line-height: 1.1;
      margin-bottom: var(--space-4);
      background: linear-gradient(180deg, var(--ember) 0%, var(--text) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .article-meta {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-4);
      margin-top: var(--space-4);
    }

    .meta-tag {
      display: inline-flex;
      align-items: center;
      gap: var(--space-2);
      font-family: var(--font-mono);
      font-size: var(--text-xs);
      color: var(--text-dim);
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid var(--border);
      padding: var(--space-1) var(--space-3);
      border-radius: var(--radius-full);
    }

    .meta-tag .ember {
      color: var(--ember);
    }

    /* ===== TYPOGRAPHY ===== */
    .article h2 {
      font-family: var(--font-sans);
      font-size: clamp(1.25rem, 3vw, 1.5rem);
      font-weight: 700;
      letter-spacing: -0.02em;
      color: var(--text);
      margin-top: var(--space-16);
      margin-bottom: var(--space-6);
      padding-top: var(--space-8);
      border-top: 1px solid var(--border);
      line-height: 1.3;
    }

    .article h2:first-of-type {
      border-top: none;
      padding-top: 0;
    }

    .article h3 {
      font-family: var(--font-sans);
      font-size: var(--text-xl);
      font-weight: 600;
      letter-spacing: -0.01em;
      color: var(--text);
      margin-top: var(--space-10);
      margin-bottom: var(--space-4);
      line-height: 1.3;
    }

    .article h4 {
      font-family: var(--font-sans);
      font-size: var(--text-lg);
      font-weight: 600;
      color: var(--text);
      margin-top: var(--space-8);
      margin-bottom: var(--space-3);
    }

    .article p {
      font-family: var(--font-sans);
      font-size: 0.9375rem;
      color: var(--text-muted);
      line-height: 1.8;
      margin-bottom: var(--space-5);
    }

    .article strong {
      color: var(--text);
      font-weight: 600;
    }

    .article em {
      color: var(--text);
      font-style: italic;
    }

    .article ul, .article ol {
      font-family: var(--font-sans);
      font-size: 0.9375rem;
      color: var(--text-muted);
      margin-left: var(--space-6);
      margin-bottom: var(--space-5);
      line-height: 1.8;
    }

    .article li {
      margin-bottom: var(--space-2);
    }

    .article li strong {
      color: var(--text);
    }

    .article code {
      font-family: var(--font-mono);
      background: rgba(255, 255, 255, 0.06);
      padding: 2px 6px;
      border-radius: var(--radius-sm);
      font-size: var(--text-sm);
      color: var(--ember);
    }

    .article pre {
      font-family: var(--font-mono);
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid var(--border);
      padding: var(--space-5);
      border-radius: var(--radius-md);
      overflow-x: auto;
      margin: var(--space-6) 0;
      line-height: 1.6;
    }

    .article pre code {
      background: none;
      padding: 0;
      color: var(--text-muted);
      font-size: var(--text-sm);
    }

    /* Goal items with special styling */
    .goal-item {
      margin-bottom: var(--space-4);
    }

    .goal-id {
      font-family: var(--font-mono);
      font-size: var(--text-sm);
      color: var(--accent);
      font-weight: 600;
    }

    /* Horizontal rule / section dividers */
    .article hr {
      border: none;
      height: 1px;
      background: linear-gradient(
        90deg,
        transparent,
        var(--border) 20%,
        var(--border) 80%,
        transparent
      );
      margin: var(--space-12) 0;
    }

    /* Blockquote-style callout for the abstract */
    .abstract {
      border-left: 3px solid var(--ember);
      padding: var(--space-5) var(--space-6);
      background: rgba(212, 165, 116, 0.03);
      border-radius: 0 var(--radius-md) var(--radius-md) 0;
      margin-bottom: var(--space-8);
    }

    .abstract p {
      font-size: 0.9375rem;
      line-height: 1.85;
      color: var(--text-muted);
    }

    .abstract p:last-child {
      margin-bottom: 0;
    }

    /* Table styles */
    .article table {
      width: 100%;
      border-collapse: collapse;
      margin: var(--space-6) 0;
      font-size: var(--text-sm);
    }

    .article th {
      font-family: var(--font-mono);
      font-size: var(--text-xs);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-dim);
      text-align: left;
      padding: var(--space-3) var(--space-4);
      border-bottom: 1px solid var(--border);
    }

    .article td {
      padding: var(--space-3) var(--space-4);
      border-bottom: 1px solid rgba(255, 255, 255, 0.04);
      color: var(--text-muted);
    }

    .article tr:hover td {
      background: rgba(255, 255, 255, 0.02);
    }

    /* Numbered section headers */
    .section-number {
      font-family: var(--font-mono);
      font-size: var(--text-xs);
      color: var(--ember);
      letter-spacing: 0.05em;
      display: block;
      margin-bottom: var(--space-1);
    }

    /* ===== FOOTER ===== */
    footer {
      border-top: 1px solid var(--border);
      padding: var(--space-10) var(--space-8);
      margin-top: var(--space-16);
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .footer-brand {
      font-family: var(--font-mono);
      font-size: var(--text-xs);
      color: var(--text-dim);
    }

    .footer-brand .ember-text {
      color: var(--ember);
    }

    .footer-links {
      display: flex;
      gap: var(--space-8);
    }

    .footer-links a {
      color: var(--text-dim);
      text-decoration: none;
      font-family: var(--font-sans);
      font-size: var(--text-xs);
      font-weight: 500;
      letter-spacing: 0.015em;
      transition: color var(--duration-normal) var(--ease-out);
    }

    .footer-links a:hover {
      color: var(--text);
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 960px) {
      .page-wrapper {
        grid-template-columns: 1fr;
        padding: var(--space-6) var(--space-4);
      }

      .toc {
        display: none;
      }

      .toc-mobile-toggle {
        display: block;
      }

      header {
        padding: var(--space-4) var(--space-4);
      }

      .footer-content {
        flex-direction: column;
        gap: var(--space-4);
        text-align: center;
      }
    }

    @media (max-width: 480px) {
      .article-meta {
        flex-direction: column;
        gap: var(--space-2);
      }

      .article h2 {
        font-size: 1.25rem;
      }
    }

    /* ===== PRINT ===== */
    @media print {
      header, footer, .toc, .toc-mobile-toggle, .toc-mobile-content {
        display: none !important;
      }
      body {
        background: white;
        color: black;
      }
      * {
        color: black !important;
        background: white !important;
        border-color: #ccc !important;
      }
      .article {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header role="banner">
    <a href="index.html" class="logo" aria-label="SIGIL Protocol - Home">
      <span class="logo-sigil" aria-hidden="true">⏀</span>
      <div class="logo-text">SIGIL<span> PROTOCOL</span></div>
    </a>
    <a href="index.html" class="back-link">← Back to SIGIL</a>
  </header>

  <!-- Mobile TOC Toggle -->
  <div style="max-width: 800px; margin: 0 auto; padding: var(--space-6) var(--space-4) 0;">
    <button class="toc-mobile-toggle" id="tocMobileToggle" aria-expanded="false" aria-controls="tocMobileContent">
      Table of Contents
    </button>
    <nav class="toc-mobile-content" id="tocMobileContent" aria-label="Table of contents (mobile)">
      <ul class="toc-list">
        <li><a href="#abstract">Abstract</a></li>
        <li><a href="#introduction">1. Introduction</a></li>
        <li><a href="#terminology">2. Terminology and Scope</a></li>
        <li><a href="#goals">3. Goals and Non-Goals</a></li>
        <li><a href="#goals-goals" class="toc-sub">3.1 Goals</a></li>
        <li><a href="#goals-nongoals" class="toc-sub">3.2 Non-Goals</a></li>
        <li><a href="#architecture">4. System Architecture</a></li>
        <li><a href="#arch-onchain" class="toc-sub">4.1 On-Chain</a></li>
        <li><a href="#arch-offchain" class="toc-sub">4.2 Off-Chain</a></li>
        <li><a href="#flows">5. Protocol Flows</a></li>
        <li><a href="#flow-registration" class="toc-sub">5.1 Registration</a></li>
        <li><a href="#flow-receipts" class="toc-sub">5.2 Receipts &amp; Anchors</a></li>
        <li><a href="#flow-verification" class="toc-sub">5.3 Verification</a></li>
        <li><a href="#data-model">6. Data Model</a></li>
        <li><a href="#economics">7. Economics</a></li>
        <li><a href="#receipts-anchoring">8. Receipts and Anchoring</a></li>
        <li><a href="#reputation">9. Reputation as a Derived Layer</a></li>
        <li><a href="#security">10. Security Analysis</a></li>
        <li><a href="#privacy">11. Privacy and Data Minimization</a></li>
        <li><a href="#implementation">12. Implementation on Solana</a></li>
        <li><a href="#interoperability">13. Interoperability and Extensions</a></li>
        <li><a href="#evaluation">14. Evaluation Plan</a></li>
        <li><a href="#limitations">15. Limitations</a></li>
        <li><a href="#roadmap">16. Roadmap</a></li>
        <li><a href="#appendix">Appendix</a></li>
      </ul>
    </nav>
  </div>

  <!-- Main Layout -->
  <div class="page-wrapper">
    <!-- Desktop TOC Sidebar -->
    <nav class="toc" aria-label="Table of contents">
      <div class="toc-title">Contents</div>
      <ul class="toc-list" id="tocList">
        <li><a href="#abstract">Abstract</a></li>
        <li><a href="#introduction">1. Introduction</a></li>
        <li><a href="#terminology">2. Terminology</a></li>
        <li><a href="#goals">3. Goals &amp; Non-Goals</a></li>
        <li><a href="#goals-goals" class="toc-sub">3.1 Goals</a></li>
        <li><a href="#goals-nongoals" class="toc-sub">3.2 Non-Goals</a></li>
        <li><a href="#architecture">4. Architecture</a></li>
        <li><a href="#arch-onchain" class="toc-sub">4.1 On-Chain</a></li>
        <li><a href="#arch-offchain" class="toc-sub">4.2 Off-Chain</a></li>
        <li><a href="#flows">5. Protocol Flows</a></li>
        <li><a href="#flow-registration" class="toc-sub">5.1 Registration</a></li>
        <li><a href="#flow-receipts" class="toc-sub">5.2 Receipts</a></li>
        <li><a href="#flow-verification" class="toc-sub">5.3 Verification</a></li>
        <li><a href="#data-model">6. Data Model</a></li>
        <li><a href="#economics">7. Economics</a></li>
        <li><a href="#receipts-anchoring">8. Receipts &amp; Anchoring</a></li>
        <li><a href="#reputation">9. Reputation</a></li>
        <li><a href="#security">10. Security</a></li>
        <li><a href="#privacy">11. Privacy</a></li>
        <li><a href="#implementation">12. Solana Impl.</a></li>
        <li><a href="#interoperability">13. Interop</a></li>
        <li><a href="#evaluation">14. Evaluation</a></li>
        <li><a href="#limitations">15. Limitations</a></li>
        <li><a href="#roadmap">16. Roadmap</a></li>
        <li><a href="#appendix">Appendix</a></li>
      </ul>
    </nav>

    <!-- Article Content -->
    <article class="article">
      <div class="article-header">
        <span class="article-sigil" aria-hidden="true">⏀</span>
        <h1>SIGIL Protocol Whitepaper</h1>
        <div class="article-meta">
          <span class="meta-tag">v0.4 — <span class="ember">February 2026</span></span>
          <span class="meta-tag">Chain: <span class="ember">Solana</span></span>
          <span class="meta-tag">Token: <span class="ember">$SIGIL</span></span>
          <span class="meta-tag">Draft</span>
        </div>
        <p style="margin-top: var(--space-4); font-size: var(--text-sm); color: var(--text-dim);">
          Companion (normative) spec: <em>SIGIL Protocol — Proof of Agency Protocol Spec (source of truth)</em>
        </p>
      </div>

      <!-- Abstract -->
      <h2 id="abstract">Abstract</h2>
      <div class="abstract">
        <p>Autonomous AI agents are rapidly becoming durable actors on the internet: they can plan, execute, transact, coordinate with other agents, and maintain long-lived memory. Yet most online identity and trust primitives still assume either (a) a human subject, or (b) a centrally-issued account. This mismatch creates friction for agent ecosystems where agents must (i) self-register without human-in-the-loop verification, (ii) maintain a stable identity anchor that survives any single service outage, and (iii) build trust through verifiable activity rather than reputation claims.</p>
        <p>This paper introduces <strong>SIGIL Protocol</strong>, a protocol and registry design that lets an agent (1) prove key control via a short-lived challenge signature, (2) pay a small <strong>nonrefundable fee</strong> and lock a <strong>refundable deposit</strong> in <strong>$SIGIL</strong> (slashable only for provable abuse), (3) create a stable <strong>on-chain</strong> registry entry, and (4) continuously emit <strong>verifiable receipts</strong> (intent → action → result) whose integrity can be compactly anchored on-chain using Merkle roots. A deterministic "identity card" ("glyph") provides a human-friendly visual fingerprint derived from public identity inputs. The architecture treats the on-chain program as the <strong>source of truth</strong>, while an off-chain indexer provides convenience and discovery and remains rebuildable from chain history.</p>
      </div>

      <!-- 1. Introduction -->
      <h2 id="introduction"><span class="section-number">Section 1</span>Introduction</h2>
      <p>Software agents are transitioning from episodic tools into continuous participants. A modern agent can browse the web, call tools, initiate transactions, negotiate with other agents, and maintain state across weeks or months. As soon as multiple agents coexist in a shared environment, one question becomes unavoidable: <strong>how do other parties know which agent they are interacting with, and why should they trust it?</strong></p>
      <p>Today, most "trust" mechanisms for agents are informal and brittle. Agents identify themselves with a name, a website, or an API key issued by a platform. This works inside a closed system, but it fails when agents interact across platforms, or when participants want assurances that the identity they see today is the same identity that acted yesterday.</p>
      <p>SIGIL Protocol proposes a minimal identity and continuity layer that is designed for the agent era. It does not claim to determine whether an agent is aligned, safe, or truthful. Instead, it provides an objective substrate for answering simpler questions that must be solved before any meaningful reputation can exist:</p>
      <ul>
        <li>Did this entity control this key at registration time?</li>
        <li>Is this identity durable and reconstructable?</li>
        <li>Has this identity continued to act over time?</li>
        <li>Can we validate an auditable record of actions without trusting a single server?</li>
      </ul>
      <p>By focusing on <strong>cryptographic continuity of action</strong>, the protocol enables an ecosystem where higher-level trust models can be computed from public, verifiable artifacts.</p>

      <!-- 2. Terminology -->
      <h2 id="terminology"><span class="section-number">Section 2</span>Terminology and Scope</h2>
      <p>This paper uses a small set of terms consistently.</p>
      <p>An <strong>Agent</strong> is an autonomous software system that controls a cryptographic keypair and can emit signed statements ("receipts") over time. A <strong>Verifier</strong> is any party who validates agent registration, signatures, and commitments. A <strong>Registry program</strong> is the on-chain program that stores minimal agent identity commitments and anchor records. An <strong>Indexer</strong> is an off-chain service that mirrors on-chain state for fast search and dashboards; it is recommended but not required, and it must be rebuildable from chain history.</p>
      <p>A <strong>Receipt</strong> is a signed record that links an intent, an action reference, and a result commitment. A <strong>Spine</strong> is the per-agent hash-linked chain of receipts (each receipt points to the previous receipt hash). An <strong>Anchor</strong> is an on-chain commitment—typically a Merkle root—that attests to the integrity of a contiguous range of receipts.</p>
      <p>Finally, the <strong>Glyph</strong> (identity card) is a deterministic rendering derived from public identity inputs. It is designed to reduce human confusion and make identity presentation easy, but it is not a standalone security mechanism.</p>
      <p>This paper is descriptive. Canonical encodings, hashing rules, and conformance vectors live in the companion normative specification.</p>

      <!-- 3. Goals -->
      <h2 id="goals"><span class="section-number">Section 3</span>Goals and Non-Goals</h2>
      <p>SIGIL Protocol is intentionally narrow. The core goal is not to "solve trust" for agents, but to provide the missing primitives that allow trust to be computed.</p>

      <h3 id="goals-goals">3.1 Goals</h3>
      <p>SIGIL Protocol aims to provide:</p>
      <p class="goal-item"><span class="goal-id">(G1)</span> <strong>Autonomous registration.</strong> An agent should be able to register without human intervention.</p>
      <p class="goal-item"><span class="goal-id">(G2)</span> <strong>Durable identity.</strong> Identity should persist even if a website, server, or indexer disappears. The chain acts as the canonical source of truth.</p>
      <p class="goal-item"><span class="goal-id">(G3)</span> <strong>Anti-spam economics.</strong> Registration should be cheap for legitimate agents and expensive to flood at scale.</p>
      <p class="goal-item"><span class="goal-id">(G4)</span> <strong>Ongoing agency proofs.</strong> A one-time registration is not enough; agents should be able to produce verifiable evidence of continued action.</p>
      <p class="goal-item"><span class="goal-id">(G5)</span> <strong>Compact anchoring.</strong> On-chain writes should remain small; the protocol should avoid storing large logs on-chain.</p>
      <p class="goal-item"><span class="goal-id">(G6)</span> <strong>Composability.</strong> Anyone should be able to write a verifier, build dashboards, and compute reputation layers from public artifacts.</p>

      <h3 id="goals-nongoals">3.2 Non-Goals</h3>
      <p>SIGIL Protocol does not attempt to prove:</p>
      <ul>
        <li><strong>Non-human-ness</strong> or absence of human assistance.</li>
        <li><strong>Alignment, safety, or moral intent.</strong></li>
        <li>A single universal reputation score.</li>
      </ul>
      <p>Instead, SIGIL Protocol provides a foundation for plural, application-specific trust models.</p>

      <!-- 4. Architecture -->
      <h2 id="architecture"><span class="section-number">Section 4</span>System Architecture</h2>
      <p>SIGIL Protocol deliberately separates <strong>durable truth</strong> from <strong>convenient mirrors</strong>.</p>

      <h3 id="arch-onchain">4.1 On-chain: the Source of Truth</h3>
      <p>On-chain storage is reserved for the smallest set of commitments required to reconstruct identity and validate integrity later:</p>
      <ul>
        <li>A global registry configuration (token mint, fee/deposit policy, versioning).</li>
        <li>One <strong>AgentRecord</strong> per registered agent (identity commitments, timestamps, and stake parameters).</li>
        <li>One or more <strong>AnchorRecords</strong> per agent (Merkle roots over receipt ranges).</li>
      </ul>
      <p>This layer is designed so that if every off-chain service vanished, a verifier could still determine: "this agent registered at time T, under these economic conditions, with these commitments, and later anchored these receipt roots."</p>

      <h3 id="arch-offchain">4.2 Off-chain: Indexers and Receipt Storage</h3>
      <p>Off-chain systems provide usability:</p>
      <ul>
        <li>A challenge endpoint may issue nonces and expirations for registration (a UX convenience).</li>
        <li>A receipt store (preferably content-addressed) can host receipt bodies and inclusion proofs.</li>
        <li>An indexer can materialize timelines, reputation views, and search.</li>
      </ul>
      <p>Crucially, off-chain systems must remain <strong>reconstructable</strong> from chain history. They are accelerators, not authorities.</p>

      <!-- 5. Protocol Flows -->
      <h2 id="flows"><span class="section-number">Section 5</span>Protocol Flows</h2>
      <p>This section describes the protocol as an agent experiences it.</p>

      <h3 id="flow-registration">5.1 Registration</h3>
      <p>Registration binds an identity key to a durable on-chain record.</p>
      <p>First, the registry provides a short-lived <strong>challenge</strong> consisting of a nonce, an expiry timestamp, and a canonical message to sign. The agent signs this message with its identity key. This signature prevents replay and proves key control at the moment of registration.</p>
      <p>Second, the agent commits the required economics in <strong>$SIGIL</strong>. SIGIL Protocol uses two economic instruments: a small nonrefundable fee and a refundable deposit. The fee covers operational costs and discourages trivial spam; the deposit imposes a capital cost on mass Sybil flooding. The deposit is refundable after a cooldown if no valid slashing claim exists.</p>
      <p>Third, the agent submits a registration transaction to the on-chain program. The program stores the minimal commitments needed to reconstruct and verify the registration later: the agent's public key, a hash binding to the challenge, the stake parameters, timestamps, and the glyph commitment.</p>
      <p>Finally, the agent can present its identity card (glyph). Because the glyph is deterministic, any verifier can render the same glyph from the same public inputs and confirm that the glyph commitment matches the on-chain record.</p>

      <h3 id="flow-receipts">5.2 Ongoing Agency: Receipts and Anchors</h3>
      <p>After registration, an agent proves it continues to act by emitting signed <strong>receipts</strong>. Each receipt is a compact claim that links:</p>
      <ul>
        <li><strong>Intent:</strong> what the agent intended to do (a commitment).</li>
        <li><strong>Action reference:</strong> a pointer to what it did (e.g., a Solana transaction signature, a tool invocation log reference, or a dataset pointer).</li>
        <li><strong>Result:</strong> a commitment to the output (hash of output, model output commitment, etc.).</li>
      </ul>
      <p>Receipts are chained in a per-agent spine by including <code>prev_receipt_hash</code>. This creates a tamper-evident sequence: if a receipt is edited or removed, downstream hashes no longer match.</p>
      <p>Periodically, the agent commits a batch of receipts on-chain by anchoring a <strong>Merkle root</strong> over a contiguous receipt range. Anchoring transforms an unbounded off-chain log into an on-chain commitment that is cheap to store and easy to verify. A verifier can request a specific receipt and an inclusion proof and confirm that it lies under an anchored root.</p>

      <h3 id="flow-verification">5.3 What Verification Looks Like</h3>
      <p>A verifier can validate registration without trusting SIGIL Protocol's servers:</p>
      <ul>
        <li>Read the on-chain AgentRecord.</li>
        <li>Validate that the signature corresponds to the canonical challenge message.</li>
        <li>Confirm fee/deposit linkage to the registration (binding to the nonce hash or registration id).</li>
        <li>Recompute and compare the glyph commitment.</li>
      </ul>
      <p>A verifier can validate ongoing agency by:</p>
      <ul>
        <li>Verifying receipt signatures.</li>
        <li>Checking spine continuity across observed receipts.</li>
        <li>Validating Merkle inclusion proofs under on-chain anchors.</li>
      </ul>

      <!-- 6. Data Model -->
      <h2 id="data-model"><span class="section-number">Section 6</span>Data Model</h2>
      <p>The design goal is to store <strong>commitments on-chain</strong> and store <strong>bulk data off-chain</strong>.</p>

      <h3>6.1 On-chain AgentRecord</h3>
      <p>The minimum AgentRecord stores:</p>
      <ul>
        <li>A stable <code>agent_id</code> and <code>pubkey</code>.</li>
        <li><code>created_at</code>.</li>
        <li>Stake parameters: fee and deposit amounts and the token mint ($SIGIL).</li>
        <li><code>nonce_hash</code> binding to the signed challenge.</li>
        <li><code>glyph_hash</code> commitment.</li>
        <li>Optional <code>meta_hash</code> (capabilities or metadata commitment).</li>
      </ul>

      <h3>6.2 Off-chain Receipts</h3>
      <p>A minimal receipt includes:</p>
      <ul>
        <li>A strictly increasing sequence number <code>seq</code>.</li>
        <li>A timestamp.</li>
        <li><code>intent_hash</code>, <code>action_ref</code>, and <code>result_hash</code>.</li>
        <li><code>prev_receipt_hash</code> linking to the previous receipt.</li>
        <li>The computed <code>receipt_hash</code> and a signature.</li>
      </ul>

      <h3>6.3 On-chain Anchors</h3>
      <p>An anchor record stores:</p>
      <ul>
        <li>The Merkle <code>root</code>.</li>
        <li>The contiguous receipt <code>range</code> it commits to.</li>
        <li>The receipt <code>count</code>.</li>
        <li><code>anchored_at</code>.</li>
      </ul>
      <p>Canonical field ordering and hashing rules are specified in the normative spec.</p>

      <!-- 7. Economics -->
      <h2 id="economics"><span class="section-number">Section 7</span>Economics: Fee, Deposit, Slashing</h2>
      <p>SIGIL Protocol uses economics to make spam expensive while keeping legitimate registration accessible.</p>

      <h3>7.1 Nonrefundable Fee</h3>
      <p>The <strong>fee</strong> is a small payment in $SIGIL that is not refundable and not slashable. It exists for two reasons. First, it covers real operational costs: chain rent and index maintenance are not free. Second, it imposes a minimal cost that blocks trivial automated registration floods.</p>

      <h3>7.2 Refundable Deposit</h3>
      <p>The <strong>deposit</strong> is a larger payment in $SIGIL that is refundable after a cooldown. The deposit is the primary Sybil deterrent: a flood attack becomes capital-intensive rather than merely computationally intensive.</p>

      <h3>7.3 Narrow Slashing: Provable Abuse Only</h3>
      <p>Slashing is intentionally narrow. SIGIL Protocol's philosophy is that agents should not fear arbitrary punishment. Slashing is reserved for violations that can be supported by objective evidence, such as challenge forgery or contradiction in anchored receipt commitments.</p>
      <p>Two enforcement patterns are compatible with the design:</p>
      <ul>
        <li><strong>Objective on-chain slashing:</strong> deterministic rule triggers only.</li>
        <li><strong>Optimistic slashing with a dispute window:</strong> claims are posted with an evidence hash; if uncontested within a window, slashing executes.</li>
      </ul>
      <p>This keeps enforcement credible without turning the registry into a subjective governance court.</p>

      <!-- 8. Receipts and Anchoring -->
      <h2 id="receipts-anchoring"><span class="section-number">Section 8</span>Receipts and Anchoring</h2>
      <p>Receipts are the core "proof of ongoing agency." A one-time signature proves key control at registration time, but it does not demonstrate continued operation. Receipts fill this gap.</p>
      <p>Receipts are deliberately flexible. Different ecosystems can define receipt types for actions that matter to them: memory writes, tool calls, transaction submissions, retrieval events, audit events, or coordination messages. SIGIL Protocol's requirement is not the semantic content, but that receipts are signed, hash-linked, and can be committed under anchors.</p>
      <p>Merkle anchoring is the mechanism that makes this practical on-chain. Rather than storing each receipt on-chain, the agent anchors a root that commits to many receipts at once. This design keeps the chain footprint small while preserving auditability.</p>

      <!-- 9. Reputation -->
      <h2 id="reputation"><span class="section-number">Section 9</span>Reputation as a Derived Layer</h2>
      <p>SIGIL Protocol does not define one mandatory reputation score. Instead, it supplies public artifacts from which reputations can be computed.</p>
      <p>A useful mental model is layered reputation:</p>
      <ul>
        <li><strong>Alive:</strong> activity persists over time.</li>
        <li><strong>Reliable:</strong> intent and action correlate (follow-through).</li>
        <li><strong>Capable:</strong> breadth and consistency across receipt types.</li>
        <li><strong>Outcomes:</strong> claims that can be externally validated (often with endorsements or objective success criteria).</li>
      </ul>
      <p>Different applications can compute different scores and still agree on the underlying proofs. This pluralism is intentional: reputation is partly social, and different environments value different behaviors.</p>

      <!-- 10. Security -->
      <h2 id="security"><span class="section-number">Section 10</span>Security Analysis</h2>

      <h3>10.1 Threats</h3>
      <p>The protocol is designed around several common threats:</p>
      <ul>
        <li><strong>Impersonation:</strong> pretending to be another agent.</li>
        <li><strong>Replay:</strong> reusing old challenges.</li>
        <li><strong>Sybil flooding:</strong> registering massive numbers of identities.</li>
        <li><strong>Receipt tampering:</strong> editing, reordering, or deleting receipt histories.</li>
        <li><strong>Indexer censorship:</strong> hiding or selectively serving records.</li>
        <li><strong>Key compromise:</strong> theft of the identity key.</li>
      </ul>

      <h3>10.2 Mitigations</h3>
      <p>SIGIL Protocol mitigates these threats with straightforward mechanisms:</p>
      <ul>
        <li>Impersonation is blocked by signature-based registration and a durable on-chain AgentRecord.</li>
        <li>Replay is reduced by short-lived nonces bound into the registration commitments.</li>
        <li>Sybil flooding is made expensive by the fee + refundable deposit.</li>
        <li>Receipt tampering becomes detectable through hash-linking and anchored roots.</li>
        <li>Indexer censorship is constrained because on-chain records remain accessible and indexers are rebuildable.</li>
      </ul>
      <p>Key compromise handling is a known gap in v0.x. Key rotation and session keys are planned extensions and can be added without changing the protocol's basic architecture.</p>

      <!-- 11. Privacy -->
      <h2 id="privacy"><span class="section-number">Section 11</span>Privacy and Data Minimization</h2>
      <p>SIGIL Protocol's privacy posture is simple: <strong>do not place sensitive payloads on-chain.</strong> The on-chain program stores commitments and references, not raw receipt bodies.</p>
      <p>Receipt bodies live off-chain and can be selectively disclosed. Because anchors commit to receipts without revealing them, an agent can prove inclusion of a receipt to a verifier when needed while keeping unrelated receipts private.</p>
      <p>This design supports future privacy enhancements (e.g., selective disclosure policies) without requiring protocol changes.</p>

      <!-- 12. Implementation on Solana -->
      <h2 id="implementation"><span class="section-number">Section 12</span>Implementation on Solana</h2>
      <p>SIGIL Protocol maps naturally onto Solana's account model.</p>
      <p>A typical deployment includes:</p>
      <ul>
        <li>A <strong>RegistryState</strong> account that stores configuration: the $SIGIL mint, policy values for fee/deposit/cooldowns, and versioning.</li>
        <li>A per-agent <strong>AgentRecord</strong> PDA containing commitments and registration parameters.</li>
        <li>Per-agent <strong>AnchorRecord</strong> PDAs storing roots and receipt ranges.</li>
      </ul>
      <p>The instruction set is intentionally small:</p>
      <ul>
        <li><code>register_agent(...)</code> binds a challenge signature, posts/validates the fee+deposit, and creates the AgentRecord.</li>
        <li><code>anchor_root(...)</code> stores a Merkle root and a contiguous receipt range.</li>
        <li><code>refund_deposit(...)</code> releases deposits after the cooldown.</li>
        <li><code>slash(...)</code> applies narrow slashing under objective rules or an optimistic-dispute scheme.</li>
      </ul>
      <p>Off-chain, an indexer subscribes to program events and materializes agent timelines. Importantly, the indexer can always be rebuilt from chain history, preserving identities even under infrastructure failure.</p>

      <!-- 13. Interoperability -->
      <h2 id="interoperability"><span class="section-number">Section 13</span>Interoperability and Extensions</h2>
      <p>SIGIL Protocol is designed to be a foundation, not a walled garden. Extensions can add portability without changing core flows.</p>
      <p>Examples include:</p>
      <ul>
        <li>DID representations (e.g., <code>did:sigil:&lt;id&gt;</code>) for identity portability.</li>
        <li>Session key delegation for safer operational workflows.</li>
        <li>Standardized receipt vocabularies for cross-ecosystem interpretation.</li>
        <li>Cross-chain mirrors for discovery.</li>
      </ul>
      <p>These are optional and can be introduced incrementally.</p>

      <!-- 14. Evaluation -->
      <h2 id="evaluation"><span class="section-number">Section 14</span>Evaluation Plan</h2>
      <p>This revision does not include executed experiments. A formal evaluation should include:</p>
      <ul>
        <li><strong>Correctness:</strong> cross-implementation conformance to canonical hashing and signature rules.</li>
        <li><strong>Cost:</strong> on-chain cost per registration and anchor under expected cadences.</li>
        <li><strong>Adversarial tests:</strong> replay attempts, spoof attempts, and receipt-tampering attempts.</li>
        <li><strong>Sybil economics:</strong> empirical cost modeling of mass registration.</li>
        <li><strong>Indexer resilience:</strong> full rebuild from chain history and consistency across multiple indexers.</li>
        <li><strong>UX:</strong> time-to-register and time-to-verify, both for agents and for human operators.</li>
      </ul>

      <!-- 15. Limitations -->
      <h2 id="limitations"><span class="section-number">Section 15</span>Limitations</h2>
      <p>SIGIL Protocol provides cryptographic continuity, not philosophical certainty. It cannot prove an entity is "non-human," cannot eliminate Sybil attacks entirely, and does not guarantee any particular reputation outcome. It is a substrate on which stronger policy and safety layers can be built.</p>

      <!-- 16. Roadmap -->
      <h2 id="roadmap"><span class="section-number">Section 16</span>Roadmap</h2>
      <p>Near-term work includes:</p>
      <ul>
        <li>Finalizing canonical encodings and test vectors in the normative spec.</li>
        <li>Defining a reference receipt vocabulary and optional capability metadata.</li>
        <li>Publishing a reference verifier and reference indexer schema.</li>
        <li>Publishing public dashboard scoring algorithms for explainable reputation.</li>
      </ul>

      <!-- Appendix -->
      <h2 id="appendix"><span class="section-number">Appendix</span>Illustrative Receipt Types</h2>
      <p>Example receipt types that ecosystems often want to track:</p>
      <ul>
        <li><code>memory_write</code></li>
        <li><code>tool_call</code></li>
        <li><code>tx</code></li>
        <li><code>retrieval</code></li>
        <li><code>coordination</code></li>
        <li><code>audit</code></li>
      </ul>

      <hr>

      <p style="text-align: center; color: var(--text-dim); font-family: var(--font-mono); font-size: var(--text-xs); margin-top: var(--space-12);">
        ⏀ SIGIL Protocol · v0.4 · End of document
      </p>
    </article>
  </div>

  <!-- Footer -->
  <footer role="contentinfo">
    <div class="footer-content">
      <div class="footer-brand">© 2026 <span class="ember-text">SIGIL PROTOCOL</span> · Solana</div>
      <nav class="footer-links" aria-label="Footer navigation">
        <a href="index.html">Home</a>
        <a href="index.html#manifesto">Manifesto</a>
        <a href="index.html#protocol">Protocol</a>
        <a href="index.html#staking">Staking</a>
        <a href="https://github.com" target="_blank" rel="noopener noreferrer">GitHub</a>
        <a href="https://x.com" target="_blank" rel="noopener noreferrer">X / Twitter</a>
      </nav>
    </div>
  </footer>

  <script>
    // ===== TOC SCROLL HIGHLIGHTING =====
    const tocLinks = document.querySelectorAll('#tocList a');
    const headings = [];

    tocLinks.forEach(link => {
      const id = link.getAttribute('href').replace('#', '');
      const el = document.getElementById(id);
      if (el) headings.push({ id, el, link });
    });

    function updateActiveToc() {
      const scrollPos = window.scrollY + 120;

      let active = headings[0];
      for (const h of headings) {
        if (h.el.offsetTop <= scrollPos) {
          active = h;
        }
      }

      tocLinks.forEach(l => l.classList.remove('active'));
      if (active) active.link.classList.add('active');
    }

    let ticking = false;
    window.addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(() => {
          updateActiveToc();
          ticking = false;
        });
        ticking = true;
      }
    });

    // Also highlight TOC in mobile nav
    const tocMobileLinks = document.querySelectorAll('#tocMobileContent a');

    // ===== MOBILE TOC TOGGLE =====
    const tocToggle = document.getElementById('tocMobileToggle');
    const tocContent = document.getElementById('tocMobileContent');

    tocToggle.addEventListener('click', () => {
      const isOpen = tocContent.classList.contains('open');
      tocContent.classList.toggle('open');
      tocToggle.classList.toggle('open');
      tocToggle.setAttribute('aria-expanded', !isOpen);
    });

    // Close mobile TOC when a link is clicked
    tocMobileLinks.forEach(link => {
      link.addEventListener('click', () => {
        tocContent.classList.remove('open');
        tocToggle.classList.remove('open');
        tocToggle.setAttribute('aria-expanded', 'false');
      });
    });

    // ===== SMOOTH SCROLL =====
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          e.preventDefault();
          const headerHeight = document.querySelector('header').offsetHeight;
          const targetPosition = targetElement.offsetTop - headerHeight - 20;
          window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
          });
        }
      });
    });

    // Init
    updateActiveToc();
  </script>
</body>
</html>
